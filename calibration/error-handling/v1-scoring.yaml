# Scoring calibration for Error Handling pattern v1
# This file contains the scoring rubrics used during code evaluation
# Pattern definition: patterns/core/error-handling/v1.yaml

pattern_ref:
  name: "Error Handling"
  version: "v1"

tactic_scoring:
  - tactic_id: "domain-error-base-class"
    scoring_rubric:
      5: "All business rule violations throw DomainError subclasses"
      4: "One violation throws generic Error"
      3: "Multiple violations use generic Error"
      2: "Most violations use generic Error"
      1: "No DomainError, all generic errors"
      0: "Not applicable (no domain errors)"

  - tactic_id: "application-errors"
    scoring_rubric:
      5: "All operational failures use specific application error classes"
      4: "One operational error uses generic Error"
      3: "Multiple operational errors not typed"
      2: "Most operational errors generic"
      1: "No application error classes"
      0: "Not applicable"

  - tactic_id: "descriptive-error-names"
    scoring_rubric:
      5: "All error classes descriptively named (XxxNotFoundError, YyyAlreadyExistsError)"
      4: "One error with generic name"
      3: "Multiple errors poorly named"
      2: "Most errors have generic names"
      1: "All errors named 'Error' or similar"
      0: "Not applicable"

  - tactic_id: "set-error-name"
    scoring_rubric:
      5: "All custom errors set this.name in constructor"
      4: "One error doesn't set name"
      3: "Multiple errors missing name"
      2: "Most errors don't set name"
      1: "No errors set name property"
      0: "Not applicable"

  - tactic_id: "error-mapper"
    scoring_rubric:
      5: "All errors mapped to HTTP via centralized mapper"
      4: "One handler does inline mapping"
      3: "Multiple handlers bypass mapper"
      2: "Most handlers do inline mapping"
      1: "No error mapper, all inline"
      0: "Not applicable (no HTTP layer)"

  - tactic_id: "domain-errors-in-domain"
    scoring_rubric:
      5: "All domain errors in domain/errors/"
      4: "One domain error in wrong location"
      3: "Multiple domain errors misplaced"
      2: "Domain errors scattered"
      1: "No organization"
      0: "Not applicable"

  - tactic_id: "app-errors-in-application"
    scoring_rubric:
      5: "All application errors in application/errors/"
      4: "One application error in wrong location"
      3: "Multiple application errors misplaced"
      2: "Application errors scattered"
      1: "No organization"
      0: "Not applicable"

  - tactic_id: "meaningful-messages"
    scoring_rubric:
      5: "All error messages include helpful context (IDs, field names)"
      4: "Mostly contextual, one generic message"
      3: "Some messages contextual, others generic"
      2: "Most messages generic"
      1: "All messages generic ('Error occurred')"
      0: "Not applicable"

  - tactic_id: "catch-at-boundaries"
    scoring_rubric:
      5: "All layer boundaries catch and handle errors appropriately"
      4: "One boundary missing error handling"
      3: "Multiple boundaries let errors propagate raw"
      2: "Most errors not caught at boundaries"
      1: "No error handling at boundaries"
      0: "Not applicable"

  - tactic_id: "preserve-error-chain"
    scoring_rubric:
      5: "All wrapped errors preserve original via cause"
      4: "One wrapped error loses context"
      3: "Some error wrapping preserves chain"
      2: "Most error wrapping loses context"
      1: "No error chaining"
      0: "Not applicable (no error wrapping)"

  - tactic_id: "log-before-mapping"
    scoring_rubric:
      5: "All errors logged before mapping to HTTP"
      4: "One error not logged"
      3: "Some errors logged"
      2: "Minimal logging"
      1: "No error logging"
      0: "Not applicable"